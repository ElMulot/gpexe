{% set title = 'New element' %}

{% extends 'modal/xl_modal.html.twig' %}
{% import "macros/_nav.html.twig" as nav %}

{% set items = [] %}

{% if series|length > 0 %}
	{% set serie_ids = series|map(v => v.id) %}
	{% set items = items|merge([
		{
			'name': "Serie",
			'href': path('serie_new', {'project': project.id, 'id': serie_ids }),
		}
	]) %}
{% endif %}

{% if series|length > 0 %}
	{% set serie_ids = series|map(v => v.id) %}
	{% set items = items|merge([
		{
			'name': "Document",
			'href': path('document_new', {'project': project.id, 'id': serie_ids}),
		}
	]) %}
{% endif %}

{% if documents|length > 0 %}
	{% set document_ids = documents|map(v => v.id) %}
	{% set items = items|merge([
		{
			'name': "Version",
			'href': path('version_new', {'project': project.id, 'id': document_ids}),
		}
	]) %}
{% endif %}

{% block modal_body %}

	{{ nav.turbo('new_pannel', items|map(item => (item == items|last)?item|merge({'class': 'active'}):item), true) }}
	
{% endblock %}

{% block modal_footer %}
	
	<button type="button" class="btn btn-secondary btn-width" data-bs-dismiss="modal">{% trans %}Cancel{% endtrans %}</button>
	<button type="submit" form="form" class="btn btn-primary btn-width">{% trans %}Save{% endtrans %}</button>

{% endblock %}
